CREATE DATABASE PROYECTO;
GO

USE PROYECTO;
GO


CREATE TABLE PRODUCTO(
	ID_PRODUCTO INT PRIMARY KEY,
	NOMBRE_PRODUCTO VARCHAR(max),
	LOCALIZACION VARCHAR(50),
	STOCK_MIN INT
)  

CREATE TABLE PRODUCTOS_AUX (
	ID_PRODUCTO_AUX INT PRIMARY KEY FOREIGN KEY REFERENCES PRODUCTO(ID_PRODUCTO),
	NOMBRE_PRODAUX VARCHAR(max),
	FORMATO_PRODAUX TEXT,
	CANTIDAD INT,
	LOCALIZACION_PRODAUX VARCHAR(50),
	UBICACION_PRODAUX VARCHAR(50),
	STOCK_MINIMO_PRODAUX INT,
);
DROP TABLE PRODUCTOS_AUX

CREATE TABLE MATERIAL(
    ID_MATERIAL INT PRIMARY KEY FOREIGN KEY REFERENCES PRODUCTO(ID_PRODUCTO),
	NOMBRE_MATERIAL VARCHAR(max),
	LOCALIZACION VARCHAR(25),
	UBICACION VARCHAR(40),
	SUBCATEGORIA VARCHAR(max),
	DESCRIPCION TEXT,
	CANTIDAD INT,
	STOCK_MINIMO_MATERIAL INT,
	FECHA_COMPRA DATE,
   
);



CREATE TABLE REACTIVOS(
    ID_REACTIVO INT PRIMARY KEY FOREIGN KEY REFERENCES PRODUCTO(ID_PRODUCTO),
    NOMBRE_REACTIVO VARCHAR(max),
	FORMATO_REACTIVO VARCHAR(10),
    CANTIDAD_REACTIVO INT,
	LOCALIZACION_REACTIVO VARCHAR(30),
	UBICACION_REACTIVO VARCHAR(5),
	GRADO_PUREZA VARCHAR(30),
    FECHA_CADUCIDAD VARCHAR(30),
	STOCK_MINIMO_REACTIVOS INT
);



CREATE TABLE ALMACEN(
    ID_ALMACEN VARCHAR(5) PRIMARY KEY,
    NOMBRE_ALMACEN VARCHAR(20)
);

CREATE TABLE UBICACION(
    ID_UBICACION VARCHAR(5) PRIMARY KEY,
	ID_ALMACEN VARCHAR(5) FOREIGN KEY REFERENCES ALMACEN(ID_ALMACEN),
	ID_PRODUCTO INT FOREIGN KEY REFERENCES PRODUCTO(ID_PRODUCTO),
    LOCALIZACION VARCHAR(20)
);


CREATE TABLE FORMATO(
    Cod_Formato VARCHAR(5) PRIMARY KEY,
	ID_PRODUCTO INT FOREIGN KEY REFERENCES PRODUCTO(ID_PRODUCTO),
    FORMATO VARCHAR(20)
);

CREATE TABLE RIESGOS(
    ID_RIESGO INT PRIMARY KEY,
    IMAGEN_RIESGO VARCHAR(max)
);



CREATE TABLE REACTIVO_RIESGO(
	ID_RIESGO INT,
	ID_REACTIVO INT,
	PRIMARY KEY (ID_RIESGO, ID_REACTIVO),
	CONSTRAINT FK_RIESGO_REACTIVO 
		FOREIGN KEY (ID_RIESGO) REFERENCES RIESGOS(ID_RIESGO),
	CONSTRAINT FK_RIESGO_REACTIVO2 
		FOREIGN KEY (ID_REACTIVO) REFERENCES REACTIVOS(ID_REACTIVO)
);

CREATE TABLE NUMERO_SERIE(
    NUMERO_SERIE VARCHAR(10) PRIMARY KEY,
	ID_PRODUCTO INT FOREIGN KEY REFERENCES PRODUCTO(ID_PRODUCTO)
);

